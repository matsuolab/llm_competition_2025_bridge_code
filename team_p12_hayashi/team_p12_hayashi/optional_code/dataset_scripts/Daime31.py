#　-*- coding: utf-8 -*-
import sys
import os
import re
import struct
import binascii
import numpy as np
# -------------------------------------------------------
# 1. ライブラリーのインポート, データ読込み
# ライブラリーのインポート
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
# -------------------------------------------------------
from datasets import load_dataset
from huggingface_hub import login
# # -------------------------------------------------------
# # -------------------------------------------------------
math_df = pd.read_csv('./AIME2024_Math_30_a.csv', encoding='cp932')
# math_df = pd.read_csv('./hle_Math_1021_e.csv')
# # ------------------------------
# # -------------------------------------------------------
import requests
# # -------------------------------------------------------
# ▼ 2. 概要問い合わせ（テキストベースのみ）
# # -----------------------------------------------------
mc_list = []
for k in range(len(1)):
# for k in range(len(math_df)):
    # 参考資料として読み込む外部テキストファイル
    # テキストファイルの内容を読み込む
    problem_text = math_df['Problem'][k]
    solution_text = math_df['Solution'][k]
    answer_text = math_df['Answer'][k]
    # 複数行の文字列プロンプト
    summary_prompt = f"""以下の【problem】と【answer】は、AIMEに含まれる数学の問題と回答です。
    この数学の問題の解答を考え、その解法と解答を日本語で答えてください。
    解答は、Answer=(解答)で答えるようにしてください。
    ※日本語で回答してください。
    【problem】
    {problem_text}
    【Answer】
    {answer_text}
    """
    system_prompt_text = "あなたは優秀な数学の知識を持ったエキスパートです。"
    # セッションとテキストのフォームデータ
    data = {
        "sessionId": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxf",
        "userPromptText": summary_prompt,
        "systemPromptText": system_prompt_text
    }
    response = requests.post("https://aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
                             data=data, verify=False)
    response_json = json.loads(response.text)
    exp01 = response_json.get("Text", "")
    # リストに追加
    mc_list.append(exp01)
# DataFrame に列として追加
math_df['math_answer'] = mc_list
# 出力 CSV ファイル名（任意で調整）
output_file = './AIME2024_Math_answered.csv'
math_df.to_csv(output_file, index=False, encoding='utf-8-sig')
print(f"保存完了: {output_file}")
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------

