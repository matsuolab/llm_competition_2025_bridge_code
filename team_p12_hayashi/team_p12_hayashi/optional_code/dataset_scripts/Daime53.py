#　-*- coding: utf-8 -*-
import sys
import os
import re
import struct
import binascii
import numpy as np
import pandas as pd
import json
# # -------------------------------------------------------
# # -------------------------------------------------------
math_df = pd.read_csv('./AIME2024_Math_30_a.csv', encoding='cp932')
# # -------------------------------------------------------
import requests
# # -------------------------------------------------------
# ▼ 2. 概要問い合わせ（テキストベースのみ）
# # -----------------------------------------------------
mc_list = []
for k in range(len(math_df)):
    # 参考資料として読み込む外部テキストファイル
    # テキストファイルの内容を読み込む
    problem_text = math_df['Problem'][k]
    solution_text = math_df['Solution'][k]
    answer_text = math_df['Answer'][k]
    # 複数行の文字列プロンプト
    summary_prompt = f"""The following 【problem】, 【solution】 and 【answer】 are from an AIME-level 
    mathematics question, its solution, and its answer.
    Your task is to extract only **one single key hint** — the most essential idea 
    or reasoning step from the full solution — that would significantly help
    a student make progress on solving the problem. 
    This hint should not be a full solution or give away the answer, 
    but rather a meaningful insight that leads the student in the right direction.
    Then, create a hint-enhanced version of the original problem by appending 
    that single key hint **after** the problem statement.
    Important instructions:
    - DO NOT modify the original problem text.
    - Begin the hint section with the sentence: "However, here is a key hint to help you:"
    - Provide only **one** hint (no more than 1–2 sentences).
    - DO NOT include the final answer 【answer】 anywhere in the hint.
    - The hint must be meaningful and complete — do not cut off mid-sentence or mid-idea.
    - Your output must be written in English only.
    【problem】
    {problem_text}
    【solution】
    {solution_text}
    【answer】
    {answer_text}
    """

    system_prompt_text = f"""You are a brilliant mathematics expert and educator.
    Your job is to help students by offering one carefully chosen key hint from the solution —
    a hint that is meaningful, insightful, and strategically useful without revealing the full answer.
    """
    # セッションとテキストのフォームデータ
    data = {
        "sessionId": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
        "userPromptText": summary_prompt,
        "systemPromptText": system_prompt_text
    }
    response = requests.post("https://aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
                             data=data, verify=False)
    response_json = json.loads(response.text)
    exp01 = response_json.get("Text", "")
    # リストに追加
    mc_list.append(exp01)
# DataFrame に列として追加
math_df['QwOneH'] = mc_list
# 出力 CSV ファイル名（任意で調整）
output_file = './AIME2024_Math_30_a_QwOneH.csv'
math_df.to_csv(output_file, index=False, encoding='utf-8-sig')
print(f"保存完了: {output_file}")
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------
# # -------------------------------------------------------

